import{_ as J,r as g,c as z,B as K,C as U,o as W,b as A,w as h,d as X,u as Y,e as Z,f as o,i as l,s as ee,g as F,h as r,j as u,k as M,q as te,y,t as i,F as b,m,z as V}from"./index-C4Um7Kjq.js";import{_ as re}from"./PageHeader-Czcs01bb.js";import{u as ae}from"./questions-Di3wEWNw.js";import{s as se}from"./sections-BygJVMTa.js";const oe={key:1,class:"space-y-6"},le={class:"flex space-x-2"},ne={class:"flex items-center space-x-2"},ie={key:0,class:"text-sm text-gray-500 dark:text-gray-400 flex items-center"},de={key:0,class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},ue={class:"p-6 border-b border-gray-200 dark:border-gray-700"},ce={class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ve={key:0,class:"mt-4 flex flex-wrap gap-1"},ge={class:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20"},ye={class:"markdown-body"},pe=["innerHTML"],he={key:1,class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},be={class:"p-6 border-b border-gray-200 dark:border-gray-700"},me={class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},xe={key:0,class:"mt-4 flex flex-wrap gap-1"},fe={class:"p-6"},_e={key:0,class:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded"},ke={class:"space-y-3"},we=["onClick"],Ce={class:"mt-6 flex justify-center"},Qe={class:"p-4 bg-white dark:bg-gray-800 shadow rounded-lg flex justify-end space-x-2"},qe={class:"ml-2"},Be={class:"ml-2"},ze={__name:"QuestionDetail",setup(Ae){const x=Y(),f=K(),v=ae(),_=g(!0),k=g([]),e=g({}),d=g(null),n=g(!1),w=g(!1),c=z(()=>f.params.id),H=z(()=>e.value.additional_content?U(e.value.additional_content):"");W(async()=>{try{await Promise.all([S(),$()])}catch(t){console.error("Error loading question details:",t)}finally{_.value=!1}});const S=async()=>{try{let t=f.query.type;if(t){const a=await v.fetchQuestionById(c.value,t);e.value=a}else try{const a=await v.fetchQuestionById(c.value,"question");e.value=a}catch{const p=await v.fetchQuestionById(c.value,"multiple_choice");e.value=p}}catch(t){console.error("Failed to load question:",t)}},$=async()=>{try{const t=await se.getSections();k.value=t.data.results}catch(t){console.error("Failed to load sections:",t)}},D=t=>{const a=k.value.find(p=>p.id===t);return a?a.title:""},j=async()=>{try{const t=await v.updateQuestion(c.value,{is_favorite:!e.value.is_favorite},e.value.type);e.value.is_favorite=t.is_favorite}catch(t){console.error("Failed to toggle favorite:",t)}},I=async()=>{try{const t=await v.updateQuestion(c.value,{is_archived:!e.value.is_archived},e.value.type);e.value.is_archived=t.is_archived}catch(t){console.error("Failed to toggle archive:",t)}},L=()=>{confirm(`Are you sure you want to delete "${e.value.title}"?`)&&N()},N=async()=>{try{await v.deleteQuestion(c.value,e.value.type),x.push("/questions")}catch(t){console.error("Failed to delete question:",t)}},T=t=>{n.value||(d.value=t)},O=()=>{var t;n.value=!0,w.value=d.value===((t=e.value.data)==null?void 0:t.correct_answer)},E=()=>{d.value=null,n.value=!1,w.value=!1},R=t=>{var a;return n.value?t===((a=e.value.data)==null?void 0:a.correct_answer)?"border-green-500 bg-green-50 dark:bg-green-900/20":d.value===t?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700":d.value===t?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"},P=t=>{var a;return n.value?t===((a=e.value.data)==null?void 0:a.correct_answer)?"border-green-500":d.value===t?"border-red-500":"border-gray-300 dark:border-gray-600":d.value===t?"border-primary-500":"border-gray-300 dark:border-gray-600"};return(t,a)=>{const p=Z("router-link");return o(),A(X,{title:"Question Detail"},{default:h(()=>{var C,Q;return[_.value?(o(),A(ee,{key:0})):(o(),l("div",oe,[F(re,{title:e.value.title},{actions:h(()=>[r("div",le,[F(p,{to:`/questions/${c.value}/edit?type=${e.value.type}`,class:"btn-primary"},{default:h(()=>a[1]||(a[1]=[M(" Edit ")])),_:1},8,["to"]),r("button",{onClick:a[0]||(a[0]=s=>te(x).back()),class:"btn bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}," Back ")])]),_:1},8,["title"]),r("div",ne,[r("span",{class:y(["px-3 py-1 rounded-full text-sm font-medium",e.value.type==="multiple_choice"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"])},i(e.value.type==="multiple_choice"?"Multiple Choice":"Free-form Question"),3),e.value.section?(o(),l("div",ie,[a[2]||(a[2]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),M(" "+i(D(e.value.section)),1)])):u("",!0)]),e.value.type==="question"?(o(),l("div",de,[r("div",ue,[a[3]||(a[3]=r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Question",-1)),r("div",ce,i(e.value.content),1),e.value.tags&&e.value.tags.length>0?(o(),l("div",ve,[(o(!0),l(b,null,m(e.value.tags,s=>(o(),l("span",{key:s.id,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:V({backgroundColor:s.color+"20",color:s.color})},i(s.name),5))),128))])):u("",!0)]),r("div",ge,[a[4]||(a[4]=r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Answer",-1)),r("div",ye,[r("div",{innerHTML:H.value},null,8,pe)])])])):e.value.type==="multiple_choice"?(o(),l("div",he,[r("div",be,[a[5]||(a[5]=r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Question",-1)),r("div",me,i(e.value.content),1),e.value.tags&&e.value.tags.length>0?(o(),l("div",xe,[(o(!0),l(b,null,m(e.value.tags,s=>(o(),l("span",{key:s.id,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:V({backgroundColor:s.color+"20",color:s.color})},i(s.name),5))),128))])):u("",!0)]),r("div",fe,[a[6]||(a[6]=r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Options",-1)),n.value?(o(),l("div",_e," Correct answer: "+i((C=e.value.data)==null?void 0:C.correct_answer),1)):u("",!0),r("div",ke,[(o(!0),l(b,null,m((Q=e.value.data)==null?void 0:Q.choices,(s,G)=>{var q,B;return o(),l("div",{key:G,class:y(["p-4 border rounded-lg flex items-center space-x-3 cursor-pointer transition-all duration-300",R(s)]),onClick:Fe=>T(s)},[r("div",{class:y(["flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center",P(s)])},[d.value===s||n.value&&s===((q=e.value.data)==null?void 0:q.correct_answer)?(o(),l("div",{key:0,class:y(["w-3 h-3 rounded-full",s===((B=e.value.data)==null?void 0:B.correct_answer)&&n.value?"bg-green-500":"bg-primary-500"])},null,2)):u("",!0)],2),r("div",null,i(s),1)],10,we)}),128))]),r("div",Ce,[!n.value&&d.value?(o(),l("button",{key:0,onClick:O,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Check Answer ")):u("",!0),n.value?(o(),l("button",{key:1,onClick:E,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Try Again ")):u("",!0)])])])):u("",!0),r("div",Qe,[r("button",{onClick:j,class:y(["btn-icon",e.value.is_favorite?"text-yellow-500":"text-gray-400 hover:text-yellow-500"])},[a[7]||(a[7]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951.69h3.462z"})],-1)),r("span",qe,i(e.value.is_favorite?"Favorited":"Add to Favorites"),1)],2),r("button",{onClick:I,class:y(["btn-icon",e.value.is_archived?"text-gray-500":"text-gray-400 hover:text-gray-500"])},[a[8]||(a[8]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),r("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)),r("span",Be,i(e.value.is_archived?"Archived":"Archive"),1)],2),r("button",{onClick:L,class:"btn-icon text-gray-400 hover:text-red-500"},a[9]||(a[9]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),r("span",{class:"ml-2"},"Delete",-1)]))])]))]}),_:1})}}},$e=J(ze,[["__scopeId","data-v-632a01a3"]]);export{$e as default};
