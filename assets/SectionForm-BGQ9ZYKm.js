import{c as p,B as V,r as g,o as _,u as N,b as B,w as b,d as $,f as n,g as z,h as t,A as E,l as d,p as v,i as u,F as f,m as y,z as F,y as M,j as x,t as w,v as U,k as I}from"./index-Cx2El54a.js";import{_ as T}from"./PageHeader-CLbsVlwg.js";import{u as j}from"./sections-BamCL8bs.js";import"./sections-CkNSaj2W.js";const D={class:"max-w-3xl mx-auto mt-6"},L={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},P={class:"mb-6"},A={class:"mb-6"},R={class:"mb-6"},q={class:"flex flex-wrap gap-3"},H=["onClick"],O={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor"},G={class:"mb-6"},J={class:"mb-8"},K=["value","disabled"],Q={class:"flex justify-end space-x-3"},W=["disabled"],X={key:0,xmlns:"http://www.w3.org/2000/svg",class:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"none"},se={__name:"SectionForm",setup(Y){const k=V(),m=N(),a=j(),r=p(()=>k.params.id),i=p(()=>!!r.value),c=g(!1),l=g({title:"",description:"",color:"#3498db",icon:"",parent:null,order:0}),S=["#3498db","#2ecc71","#e74c3c","#f39c12","#9b59b6","#1abc9c","#34495e","#e67e22","#d35400","#27ae60","#8e44ad","#f1c40f"],h=p(()=>i.value?a.sections.filter(s=>s.id!==r.value&&s.parent!==r.value):a.sections);_(async()=>{if(a.sections.length===0&&await a.fetchSections(),i.value)try{const s=await a.fetchSection(r.value);l.value={...s}}catch(s){console.error("Failed to load section:",s),m.push("/sections")}});const C=async()=>{if(l.value.title){c.value=!0;try{i.value?await a.updateSection(r.value,l.value):await a.createSection(l.value),m.push("/sections")}catch(s){console.error("Failed to save section:",s),alert("Failed to save section. Please try again.")}finally{c.value=!1}}};return(s,e)=>(n(),B($,{title:i.value?"Edit Section":"New Section"},{default:b(()=>[z(T,{title:i.value?"Edit Section":"New Section"},{actions:b(()=>[t("button",{onClick:e[0]||(e[0]=o=>s.$router.go(-1)),class:"btn bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}," Cancel ")]),_:1},8,["title"]),t("div",D,[t("div",L,[t("form",{onSubmit:E(C,["prevent"])},[t("div",P,[e[7]||(e[7]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Title * ",-1)),d(t("input",{id:"title","onUpdate:modelValue":e[1]||(e[1]=o=>l.value.title=o),type:"text",required:"",class:"input",placeholder:"Enter section title"},null,512),[[v,l.value.title]])]),t("div",A,[e[8]||(e[8]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Description ",-1)),d(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=o=>l.value.description=o),rows:"3",class:"input",placeholder:"Enter section description"},null,512),[[v,l.value.description]])]),t("div",R,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Color ",-1)),t("div",q,[(n(),u(f,null,y(S,o=>t("button",{key:o,type:"button",onClick:Z=>l.value.color=o,class:M(["w-8 h-8 rounded-full cursor-pointer flex items-center justify-center transition-transform transform hover:scale-110",{"ring-2 ring-offset-2 ring-gray-400":l.value.color===o}]),style:F({backgroundColor:o})},[l.value.color===o?(n(),u("svg",O,e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):x("",!0)],14,H)),64)),d(t("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=o=>l.value.color=o),class:"w-8 h-8 rounded-full cursor-pointer"},null,512),[[v,l.value.color]])])]),t("div",G,[e[11]||(e[11]=t("label",{for:"icon",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Icon (optional) ",-1)),d(t("input",{id:"icon","onUpdate:modelValue":e[4]||(e[4]=o=>l.value.icon=o),type:"text",class:"input",placeholder:"Icon name (e.g., 'folder', 'book', etc.)"},null,512),[[v,l.value.icon]]),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Note: Icons will be displayed using a generic folder icon for now. ",-1))]),t("div",J,[e[14]||(e[14]=t("label",{for:"parent",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Parent Section ",-1)),d(t("select",{id:"parent","onUpdate:modelValue":e[5]||(e[5]=o=>l.value.parent=o),class:"input"},[e[13]||(e[13]=t("option",{value:null},"None (Top Level Section)",-1)),(n(!0),u(f,null,y(h.value,o=>(n(),u("option",{key:o.id,value:o.id,disabled:o.id===r.value},w(o.title),9,K))),128))],512),[[U,l.value.parent]])]),t("div",Q,[t("button",{type:"button",onClick:e[6]||(e[6]=o=>s.$router.go(-1)),class:"btn bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}," Cancel "),t("button",{type:"submit",class:"btn-primary flex items-center",disabled:c.value},[c.value?(n(),u("svg",X,e[15]||(e[15]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),I(" "+w(i.value?"Update Section":"Create Section"),1)],8,W)])],32)])])]),_:1},8,["title"]))}};export{se as default};
