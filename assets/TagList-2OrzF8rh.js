import{a as U,o as V,i as g,f as d,h as e,l as C,p as T,F,m as L,z as $,y as I,j as w,t as x,k as M,A as S,K as O,J as y,r as f,c as J,b as k,w as b,d as K,u as P,q as Q,s as R,g as _,x as G}from"./index-C4Um7Kjq.js";import{_ as W}from"./PageHeader-Czcs01bb.js";import{_ as X}from"./ConfirmDialog-ZWlj2za-.js";const Y={class:"space-y-4"},Z={class:"flex flex-wrap gap-3 mb-3"},ee=["onClick"],te={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor"},se={class:"flex items-center space-x-2"},ae={class:"flex justify-end space-x-3 pt-4"},oe=["disabled"],le={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},re={__name:"TagForm",props:{tag:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["save","cancel"],setup(s,{emit:r}){const l=s,m=r,a=U({name:"",color:"#3498db"}),v=["#3498db","#2ecc71","#e74c3c","#f39c12","#9b59b6","#1abc9c","#34495e","#e67e22","#d35400","#27ae60","#8e44ad","#f1c40f"];V(()=>{l.tag&&(a.name=l.tag.name,a.color=l.tag.color)});const h=()=>{a.name&&m("save",{...a})};return(c,o)=>(d(),g("form",{onSubmit:S(h,["prevent"])},[e("div",Y,[e("div",null,[o[3]||(o[3]=e("label",{for:"tagName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Tag Name ",-1)),C(e("input",{id:"tagName","onUpdate:modelValue":o[0]||(o[0]=n=>a.name=n),type:"text",required:"",class:"mt-1 input w-full",placeholder:"Enter tag name"},null,512),[[T,a.name]])]),e("div",null,[o[6]||(o[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Color ",-1)),e("div",Z,[(d(),g(F,null,L(v,n=>e("button",{key:n,type:"button",onClick:B=>a.color=n,class:I(["w-8 h-8 rounded-full cursor-pointer flex items-center justify-center transition-transform transform hover:scale-110",{"ring-2 ring-offset-2 ring-gray-400":a.color===n}]),style:$({backgroundColor:n})},[a.color===n?(d(),g("svg",te,o[4]||(o[4]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):w("",!0)],14,ee)),64)),C(e("input",{type:"color","onUpdate:modelValue":o[1]||(o[1]=n=>a.color=n),class:"w-8 h-8 rounded-full cursor-pointer"},null,512),[[T,a.color]])]),e("div",se,[o[5]||(o[5]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Preview:",-1)),e("span",{class:"px-2 py-1 text-sm rounded-full",style:$({backgroundColor:a.color+"20",color:a.color})},x(a.name||"Tag Name"),5)])]),e("div",ae,[e("button",{type:"button",onClick:o[2]||(o[2]=n=>c.$emit("cancel")),class:"btn bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}," Cancel "),e("button",{type:"submit",class:"btn-primary",disabled:s.loading},[s.loading?(d(),g("svg",le,o[7]||(o[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):w("",!0),M(" "+x(s.tag?"Update":"Create"),1)],8,oe)])])],32))}},ne=O("tags",{state:()=>({tags:[],loading:!1,error:null}),getters:{getTagById:s=>r=>s.tags.find(l=>l.id===r)},actions:{async fetchTags(){this.loading=!0,this.error=null;try{const s=await y.get("tags/");this.tags=s.data.results||s.data,this.loading=!1}catch(s){throw this.error=s.message||"Failed to fetch tags",this.loading=!1,s}},async createTag(s){this.loading=!0,this.error=null;try{const r=await y.post("tags/",s);return this.tags.push(r.data),this.loading=!1,r.data}catch(r){throw this.error=r.message||"Failed to create tag",this.loading=!1,r}},async updateTag(s,r){this.loading=!0,this.error=null;try{const l=await y.put(`tags/${s}/`,r),m=this.tags.findIndex(a=>a.id===s);return m!==-1&&(this.tags[m]=l.data),this.loading=!1,l.data}catch(l){throw this.error=l.message||"Failed to update tag",this.loading=!1,l}},async deleteTag(s){this.loading=!0,this.error=null;try{await y.delete(`tags/${s}/`),this.tags=this.tags.filter(r=>r.id!==s),this.loading=!1}catch(r){throw this.error=r.message||"Failed to delete tag",this.loading=!1,r}}}}),ie={key:1},de={class:"mb-6"},ce={class:"relative"},ue={key:0,class:"mt-8"},ge={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},me={class:"p-5"},ve={class:"flex justify-between items-center mb-3"},fe={class:"flex space-x-1"},he=["onClick"],pe=["onClick"],ye={class:"mt-4"},we=["onClick"],xe={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ke={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},be={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},_e={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6"},Ce={class:"flex justify-between items-start"},Te={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"},$e={class:"mt-4"},ze={__name:"TagList",setup(s){const r=P(),l=ne(),m=f(""),a=f(!1),v=f(!1),h=f(!1),c=f(null),o=f(!1);V(async()=>{await l.fetchTags()});const n=J(()=>{if(!m.value)return l.tags;const i=m.value.toLowerCase();return l.tags.filter(t=>t.name.toLowerCase().includes(i))}),B=()=>{},D=i=>{c.value={...i},v.value=!0},A=i=>{c.value=i,h.value=!0},p=()=>{a.value=!1,v.value=!1,c.value=null},j=()=>{h.value=!1,c.value=null},H=async i=>{o.value=!0;try{v.value&&c.value?await l.updateTag(c.value.id,i):await l.createTag(i),p()}catch(t){console.error("Failed to save tag:",t)}finally{o.value=!1}},q=async()=>{if(c.value)try{await l.deleteTag(c.value.id),j()}catch(i){console.error("Failed to delete tag:",i)}},E=i=>{r.push({path:"/search",query:{tag:i}})};return(i,t)=>(d(),k(K,{title:"Tags"},{default:b(()=>{var z;return[Q(l).loading?(d(),k(R,{key:0})):(d(),g("div",ie,[_(W,{title:"Tags"},{subtitle:b(()=>t[3]||(t[3]=[M(" Organize your content with custom tags ")])),actions:b(()=>[e("button",{onClick:t[0]||(t[0]=u=>a.value=!0),class:"btn-primary flex items-center"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),M(" New Tag ")]))]),_:1}),e("div",de,[e("div",ce,[C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>m.value=u),type:"text",class:"input w-full pl-10",placeholder:"Search tags...",onInput:B},null,544),[[T,m.value]]),t[5]||(t[5]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),n.value.length===0?(d(),g("div",ue,[_(G,{title:"No tags found",message:"Start by creating your first tag to organize your content.","action-text":"Create Tag",onAction:t[2]||(t[2]=u=>a.value=!0)})])):(d(),g("div",ge,[(d(!0),g(F,null,L(n.value,u=>(d(),g("div",{key:u.id,class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},[e("div",me,[e("div",ve,[e("div",{class:"px-3 py-1 rounded-full text-sm font-medium",style:$({backgroundColor:u.color+"20",color:u.color})},x(u.name),5),e("div",fe,[e("button",{onClick:N=>D(u),class:"text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 p-1"},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,he),e("button",{onClick:N=>A(u),class:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 p-1"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,pe)])]),e("div",ye,[e("a",{href:"#",onClick:S(N=>E(u.id),["prevent"]),class:"text-sm text-primary-600 dark:text-primary-400 hover:underline"}," View elements with this tag ",8,we)])])]))),128))])),a.value||v.value?(d(),g("div",xe,[e("div",ke,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:p}),e("div",be,[e("div",_e,[e("div",Ce,[e("h3",Te,x(v.value?"Edit Tag":"Create Tag"),1),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",$e,[_(re,{tag:c.value,loading:o.value,onSave:H,onCancel:p},null,8,["tag","loading"])])])])])])):w("",!0),h.value?(d(),k(X,{key:3,title:"Delete Tag",message:`Are you sure you want to delete the tag '${(z=c.value)==null?void 0:z.name}'? This won't remove the tag from existing elements.`,"confirm-text":"Delete","cancel-text":"Cancel",danger:!0,onConfirm:q,onCancel:j},null,8,["message"])):w("",!0)]))]}),_:1}))}};export{ze as default};
