import{K as n}from"./index-C4Um7Kjq.js";import{s as i}from"./sections-BygJVMTa.js";const l=n("sections",{state:()=>({sections:[],currentSection:null,sectionElements:[],loading:!1,error:null}),getters:{topLevelSections:e=>e.sections.filter(t=>!t.parent),subsections:e=>t=>e.sections.filter(s=>s.parent===t)},actions:{async fetchSections(e={}){this.loading=!0,this.error=null;try{const t=await i.getSections();this.sections=t.data.results||t.data,this.loading=!1}catch(t){throw this.error=t.message||"Failed to fetch sections",this.loading=!1,t}},async fetchSection(e){this.loading=!0,this.error=null;try{const t=await i.getSection(e);return this.currentSection=t.data,this.loading=!1,t.data}catch(t){throw this.error=t.message||"Failed to fetch section",this.loading=!1,t}},async fetchSectionElements(e){this.loading=!0,this.error=null;try{const t=await i.getSectionElements(e);return this.sectionElements=t.data,this.loading=!1,t.data}catch(t){throw this.error=t.message||"Failed to fetch section elements",this.loading=!1,t}},async createSection(e){this.loading=!0,this.error=null;try{const t=await i.createSection(e);return this.sections.push(t.data),this.loading=!1,t.data}catch(t){throw this.error=t.message||"Failed to create section",this.loading=!1,t}},async updateSection(e,t){this.loading=!0,this.error=null;try{const s=await i.updateSection(e,t),r=this.sections.findIndex(o=>o.id===e);return r!==-1&&(this.sections[r]=s.data),this.currentSection&&this.currentSection.id===e&&(this.currentSection=s.data),this.loading=!1,s.data}catch(s){throw this.error=s.message||"Failed to update section",this.loading=!1,s}},async deleteSection(e){this.loading=!0,this.error=null;try{await i.deleteSection(e),this.sections=this.sections.filter(t=>t.id!==e),this.currentSection&&this.currentSection.id===e&&(this.currentSection=null),this.loading=!1}catch(t){throw this.error=t.message||"Failed to delete section",this.loading=!1,t}}}});export{l as u};
